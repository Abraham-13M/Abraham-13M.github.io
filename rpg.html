<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>RPG — GameCatalog</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
  <style>
    :root{--accent:#00ffe7;--dark:#0b0b12;--card:#1e1e3c}
    body{margin:0;font-family:'Orbitron',Arial,Helvetica,sans-serif;background:var(--dark);color:#fff}
    header{padding:12px 18px;background:transparent;position:sticky;top:0;z-index:60}
    .grid{max-width:1100px;margin:18px auto;display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
    .card{background:var(--card);padding:12px;border-radius:10px}
  </style>
</head>
<body>
  <header>
    <div class="topbar" style="max-width:1200px;margin:0 auto;display:flex;align-items:center;gap:16px">
      <div style="display:flex;gap:12px;align-items:center"><img src="https://images.unsplash.com/photo-1606813902879-3b9a4b6f2f77?auto=format&fit=crop&w=600&q=60" alt="logo" style="width:44px;height:44px;border-radius:8px;object-fit:cover"><div><h1 style="margin:0;color:var(--accent);font-size:18px">GameCatalog</h1></div></div>
      <nav class="site-nav" aria-label="Navegación principal" style="margin-left:18px;display:flex;gap:10px;align-items:center">
        <a href="index.html">Inicio</a>
        <a href="catalogo.html">Catálogo</a>
        <a href="rpg.html">RPG</a>
        <a href="accion.html">Acción</a>
      </nav>
      <div style="margin-left:auto"><div id="favCounter">❤ <span id="favCount">0</span><span id="favLive" class="sr-only" aria-live="polite"></span></div></div>
    </div>
  </header>

  <main style="max-width:1100px;margin:28px auto;padding:18px">
    <h2 style="color:var(--accent)">RPG</h2>
    <p style="color:#ccc">Juegos de rol disponibles.</p>
    <section class="grid" id="catalogGrid"></section>
  </main>

  <div class="modal" id="modal"><div class="box"><button id="closeModal">&times;</button><div style="display:flex;gap:18px"><img id="modalImg" src="" alt="" style="width:300px;height:170px;object-fit:cover;border-radius:8px"><div><h2 id="modalTitle" style="color:var(--accent)"></h2><div id="modalPrice" style="color:var(--accent)"></div><p id="modalDesc" style="color:#ddd"></p><div style="margin-top:12px"><button id="buyBtn" style="background:var(--accent);color:#042;border:none;padding:10px;border-radius:8px;cursor:pointer">Comprar en Steam</button></div></div></div></div></div>

  <script>
    const catalog = [
      {nombre:'Counter-Strike 2',categoria:'accion',precio:19.99,imagen:'https://cdn.cloudflare.steamstatic.com/steam/apps/730/header.jpg',descripcion:'Shooter táctico competitivo.',steamAppId:730,plataforma:['PC'],rating:9.0},
      {nombre:'The Witcher 3',categoria:'rpg',precio:24.99,imagen:'https://cdn.cloudflare.steamstatic.com/steam/apps/292030/header.jpg',descripcion:'RPG épico con una gran historia.',steamAppId:292030,plataforma:['PC','PS5','Xbox'],rating:9.5},
      {nombre:'Cyberpunk 2077',categoria:'aventura',precio:29.99,imagen:'https://cdn.cloudflare.steamstatic.com/steam/apps/1091500/header.jpg',descripcion:'RPG futurista con mundo abierto.',steamAppId:1091500,plataforma:['PC','PS5','Xbox'],rating:7.5}
    ];

    const grid = document.getElementById('catalogGrid');
    const modal = document.getElementById('modal');
    const closeModal = document.getElementById('closeModal');
    const modalImg = document.getElementById('modalImg');
    const modalTitle = document.getElementById('modalTitle');
    const modalPrice = document.getElementById('modalPrice');
    const modalDesc = document.getElementById('modalDesc');
    const buyBtn = document.getElementById('buyBtn');

    let favorites = JSON.parse(localStorage.getItem('favorites')||'[]');
    function updateFavCounter(){ const fc = document.getElementById('favCount'); if(fc) fc.textContent = (favorites&&favorites.length)?favorites.length:0; const live = document.getElementById('favLive'); if(live) live.textContent = (favorites&&favorites.length)?`Tienes ${favorites.length} favoritos`:'No tienes favoritos'; }
    updateFavCounter();

    function renderCatalog(items){ grid.innerHTML=''; if(!items||items.length===0){ grid.innerHTML='<div style="color:#ccc">No hay juegos en esta categoría.</div>'; return; } items.forEach(item=>{ const card = document.createElement('div'); card.className='card'; const favActive = favorites.includes(item.nombre)?'★':'☆'; card.innerHTML = ` <img src="${item.imagen}" alt="${item.nombre}" style="width:100%;height:120px;object-fit:cover;border-radius:8px"> <h3 style="color:var(--accent);margin:8px 0">${item.nombre}</h3> <div style="color:#ccc">${item.plataforma?item.plataforma.join(', '):''} — Rating: ${item.rating}</div> <div style="margin-top:8px;display:flex;justify-content:space-between;align-items:center"> <div style="color:var(--accent);font-weight:700">${item.precio===0?'<span style=\"background:#ffb86b;color:#042;padding:4px 8px;border-radius:8px;font-weight:700\">Gratis</span>':'$'+item.precio.toFixed(2)}</div> <div> <button class="fav-btn" data-name="${item.nombre}" style="background:transparent;border:none;color:var(--accent);font-size:1.2em;cursor:pointer">${favActive}</button> <button class="buy-inline" style="background:#00bfa5;color:#042;border:none;padding:6px 10px;border-radius:8px;cursor:pointer">Comprar</button> </div> </div> `; const favBtn = card.querySelector('.fav-btn'); favBtn.addEventListener('click', e=>{ e.stopPropagation(); toggleFavorite(item.nombre,favBtn); }); const buyBtnInline = card.querySelector('.buy-inline'); buyBtnInline.addEventListener('click', e=>{ e.stopPropagation(); if(item.steamAppId) window.open('https://store.steampowered.com/app/'+item.steamAppId,'_blank'); else window.open('https://store.steampowered.com/search/?term='+encodeURIComponent(item.nombre),'_blank'); }); card.addEventListener('click', ()=> openModal(item)); grid.appendChild(card); }); }

    function openModal(item){ modalImg.src=item.imagen; modalTitle.textContent=item.nombre; modalPrice.textContent = item.precio===0?'Gratis':'$'+item.precio.toFixed(2); modalDesc.textContent = item.descripcion; buyBtn.onclick = ()=>{ if(item.steamAppId) window.open('https://store.steampowered.com/app/'+item.steamAppId,'_blank'); else window.open('https://store.steampowered.com/search/?term='+encodeURIComponent(item.nombre),'_blank'); }; modal.style.display='flex'; }
    closeModal.addEventListener('click', ()=> modal.style.display='none'); modal.addEventListener('click', e=>{ if(e.target===modal) modal.style.display='none'; });

    function toggleFavorite(name, btn){ const idx=favorites.indexOf(name); if(idx===-1){ favorites.push(name); btn.textContent='★'; } else { favorites.splice(idx,1); btn.textContent='☆'; } localStorage.setItem('favorites', JSON.stringify(favorites)); updateFavCounter(); }

    window.catalog = catalog; window.favorites = favorites; window.renderCatalog = renderCatalog; window.applyFilters = function(){ renderCatalog(window.catalog.filter(i=>i.categoria==='rpg')); }; window.updateFavCounter=updateFavCounter; window.currentPage = 1;

    renderCatalog(catalog.filter(i=>i.categoria==='rpg'));
  </script>
  <script src="header.js"></script>
  <footer style="max-width:1100px;margin:24px auto;color:#aaa;padding:18px;text-align:center">Enlaces: <a href="index.html" style="color:var(--accent)">Inicio</a> • <a href="catalogo.html" style="color:var(--accent)">Catálogo</a></footer>
</body>
</html>
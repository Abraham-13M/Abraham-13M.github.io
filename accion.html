<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Juegos de Acción</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@700&display=swap" rel="stylesheet">
    <style>
        body{margin:0;font-family:'Orbitron',Arial,Helvetica,sans-serif;background:#0b0b12;color:#fff}
        /* header shared styles */
        header{padding:12px 20px;background:linear-gradient(90deg, rgba(0,0,0,0.18), rgba(0,0,0,0.02));}
        .topbar{max-width:1100px;margin:0 auto;display:flex;align-items:center;gap:16px}
        .logo{display:flex;align-items:center;gap:12px}
        .logo img{width:48px;height:48px;border-radius:8px;object-fit:cover}
        .logo h1{font-size:20px;margin:0;color:#00ffe7}
        nav{margin-left:12px}
        nav a{color:#fff;text-decoration:none;margin-right:12px;opacity:0.9}
        nav a:hover{opacity:1;color:#00ffe7}
        .header-actions{margin-left:auto;display:flex;align-items:center;gap:12px}
        .fav-counter{background:#071022;padding:6px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);cursor:pointer}
        .user-btn{background:transparent;border:1px solid #00ffe7;color:#00ffe7;padding:8px 10px;border-radius:8px;cursor:pointer}
        :focus{outline:none}
        .focus-ring{box-shadow:0 0 0 3px rgba(0,255,231,0.12);border-radius:8px}
        .sr-only{position:absolute!important;height:1px;width:1px;overflow:hidden;clip:rect(1px,1px,1px,1px);white-space:nowrap}
        .grid{display:flex;flex-wrap:wrap;gap:24px;justify-content:center;padding:30px}
    .card{background:rgba(30,30,60,0.9);border-radius:12px;padding:16px;width:260px;box-shadow:0 6px 24px #000a;cursor:pointer}
    .card:hover{transform:translateY(-6px);transition:transform .18s ease}
    .cta:hover{transform:translateY(-3px) scale(1.02);transition:transform .12s ease}
    .card.animate-in{opacity:0;transform:translateY(6px);animation:cardIn .32s forwards ease}
    @keyframes cardIn{to{opacity:1;transform:translateY(0)}}
    .chip{display:inline-block;background:#0f1720;color:#9fd; padding:4px 8px;border-radius:12px;font-size:12px;margin-right:6px}
    .badge{display:inline-block;background:#ffb86b;color:#042;padding:4px 8px;border-radius:8px;font-weight:700;margin-left:8px}
        .card img{width:100%;height:140px;object-fit:cover;border-radius:8px}
        .precio{color:#00ffe7;font-weight:700;margin-top:8px}
        .modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.75);align-items:center;justify-content:center}
        .modal-content{background:rgba(18,18,30,0.98);padding:24px;border-radius:12px;max-width:800px;width:92%}
        .close{position:absolute;right:12px;top:8px;background:#ff4c4c;border:none;border-radius:50%;width:34px;height:34px;color:#fff}
        /* submenu transition and focus styles */
        #catalogSubmenu{display:none;opacity:0;transform:translateY(-6px);transition:opacity .18s ease, transform .18s ease}
        #catalogSubmenu.open{display:block;opacity:1;transform:translateY(0)}
        #catalogSubmenu [role="menuitem"]:focus{outline:none;background:rgba(255,255,255,0.03);border-radius:6px}
    #catalogToggle{transition:transform .18s ease;display:inline-flex;align-items:center;justify-content:center}
    #catalogToggle.open{transform:rotate(180deg)}
    </style>
</head>
<body>
        <header>
                <div class="topbar">
                    <div class="logo">
                        <img src="https://images.unsplash.com/photo-1606813902879-3b9a4b6f2f77?auto=format&fit=crop&w=600&q=60" alt="logo">
                        <div>
                            <h1>Juegos de Acción</h1>
                            <div style="font-size:12px;opacity:0.8">Explora los mejores títulos de acción</div>
                        </div>
                    </div>

                    <nav class="site-nav" aria-label="Navegación principal">
                      <a href="index.html">Inicio</a>
                      <div class="catalog-menu" style="position:relative;display:flex;align-items:center;gap:6px">
                        <a href="catalogo.html" id="catalogLink" style="color:#fff;text-decoration:none;padding:8px 6px;border-radius:6px">Catálogo</a>
                        <button id="catalogToggle" aria-haspopup="true" aria-expanded="false" aria-label="Abrir opciones de catálogo" style="background:transparent;border:none;color:#fff;padding:6px 8px;border-radius:6px;cursor:pointer">▾</button>
                        <div id="catalogSubmenu" role="menu" aria-label="Opciones de catálogo" style="position:absolute;top:40px;left:0;background:#071022;border:1px solid rgba(255,255,255,0.04);padding:8px;border-radius:8px;display:none;min-width:200px;z-index:40">
                          <a role="menuitem" href="catalogo.html" style="display:block;padding:8px;color:#fff;text-decoration:none">Ver todo</a>
                          <a role="menuitem" href="#offers" data-action="offers" style="display:block;padding:8px;color:#fff;text-decoration:none">Ofertas</a>
                          <a role="menuitem" href="#new" data-action="new" style="display:block;padding:8px;color:#fff;text-decoration:none">Nuevos lanzamientos</a>
                          <button role="menuitem" id="submenuFavorites" style="display:block;padding:8px;background:transparent;border:none;color:#fff;text-align:left;width:100%;cursor:pointer">Favoritos</button>
                          <div style="border-top:1px solid rgba(255,255,255,0.03);margin:6px 0"></div>
                          <div style="padding:6px 8px;color:#aaa;font-size:13px">Filtrar por plataforma</div>
                          <select id="submenuPlatform" style="width:100%;padding:6px;border-radius:6px;background:#111;color:#fff;border:none;margin-top:6px">
                            <option value="all">Todas</option>
                            <option value="PC">PC</option>
                            <option value="PS5">PS5</option>
                            <option value="Xbox">Xbox</option>
                            <option value="Switch">Switch</option>
                          </select>
                        </div>
                      </div>
                      <a href="accion.html">Acción</a>
                      <a href="#">Ofertas</a>
                    </nav>

                    <div class="header-actions">
                        <form id="headerSearchForm" role="search" aria-label="Buscar juegos" style="display:flex;gap:8px;align-items:center">
                            <label for="headerSearch" class="sr-only">Buscar juegos</label>
                            <input id="headerSearch" type="search" placeholder="Buscar juegos..." style="padding:8px;border-radius:8px;border:none;background:#111;color:#fff;min-width:180px">
                        </form>
                        <select id="platformFilter" class="platform-select" aria-label="Filtrar por plataforma" style="margin-right:8px;padding:8px;border-radius:6px;background:#111;color:#fff;border:none">
                          <option value="all">Todas las plataformas</option>
                          <option value="PC">PC</option>
                          <option value="PS5">PS5</option>
                          <option value="Xbox">Xbox</option>
                          <option value="Switch">Switch</option>
                        </select>
                                                <div id="favCounter" class="fav-counter" title="Ver favoritos" role="button" tabindex="0" aria-pressed="false">Favoritos: <span id="favCount">0</span>
                                                    <span id="favLive" class="sr-only" aria-live="polite"></span>
                                                </div>
                        <button id="userBtn" class="user-btn" aria-haspopup="dialog">Registrarse / Iniciar</button>
                    </div>
                </div>
        </header>
    <main>
        <div class="grid" id="grid"></div>
    </main>

    <div id="modal" class="modal">
        <div class="modal-content">
            <button id="close" class="close">&times;</button>
            <div style="display:flex;gap:20px;align-items:flex-start;flex-wrap:wrap">
                <img id="m-img" src="" alt="" style="width:260px;height:150px;object-fit:cover;border-radius:8px">
                <div style="flex:1">
                    <h2 id="m-title" style="color:#00ffe7;margin-top:0"></h2>
                    <div id="m-price" style="color:#00ffe7;font-weight:700;margin-bottom:8px"></div>
                    <p id="m-desc" style="color:#ddd;line-height:1.4"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
    const accionGames = [
        { nombre: 'Apex Legends', precio: 'Gratis', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/1172470/header.jpg', descripcion: 'Battle royale de héroes con partidas por equipos, habilidades únicas y ritmo rápido.', steamAppId: 1172470 },
        { nombre: 'Counter-Strike 2', precio: '$19.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/730/header.jpg', descripcion: 'Shooter táctico en equipos con mapas competitivos y economía de armas.', steamAppId: 730 },
        { nombre: 'Call of Duty: Warzone', precio: 'Gratis', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/1962663/header.jpg', descripcion: 'Battle royale moderno con vehículos, loot y modos por equipos.', steamAppId: 1962663 },
        { nombre: 'PUBG: Battlegrounds', precio: '$14.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/578080/header.jpg', descripcion: 'Pionero del battle royale con partidas masivas y enfoque realista.', steamAppId: 578080 },
        { nombre: 'DOOM Eternal', precio: '$39.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/782330/header.jpg', descripcion: 'Shooter rápido y violento centrado en el combate cuerpo a cuerpo y movilidad.', steamAppId: 782330 },
        { nombre: 'Fortnite', precio: 'Gratis', imagen: 'https://cdn2.unrealengine.com/fortnite-bp2-23-1920x1080-1920x1080-2c7b6e2e6b2c.jpg', descripcion: 'Battle royale con construcción, eventos en vivo y estética colorida.', steamAppId: null },
        { nombre: 'DOOM (2016)', precio: '$19.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/379720/header.jpg', descripcion: 'Reinicio de la saga DOOM: acción frenética y demonios por doquier.', steamAppId: 379720 },
        { nombre: 'Titanfall 2', precio: '$24.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/1237970/header.jpg', descripcion: 'Combina parkour ágil con combates entre pilotos y titanes gigantes.', steamAppId: 1237970 },
        { nombre: 'Destiny 2', precio: 'Gratis', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/1085660/header.jpg', descripcion: 'Shooter online con elementos de MMO y misiones cooperativas.', steamAppId: 1085660 },
        { nombre: 'Rainbow Six Siege', precio: '$14.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/359550/header.jpg', descripcion: 'Shooter táctico enfocado en la destrucción y juego en equipo.', steamAppId: 359550 },
        { nombre: 'Metro Exodus', precio: '$29.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/412020/header.jpg', descripcion: 'Shooter en primera persona con fuerte énfasis en la narrativa y supervivencia.', steamAppId: 412020 },
        { nombre: 'Borderlands 3', precio: '$39.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/397540/header.jpg', descripcion: 'Shooter-looter con humor, cooperativo y toneladas de armas.', steamAppId: 397540 },
        { nombre: 'Wolfenstein II', precio: '$29.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/582500/header.jpg', descripcion: 'Shooter de un solo jugador con campaña intensa y acción cinematográfica.', steamAppId: 582500 },
        { nombre: 'Sekiro: Shadows Die Twice', precio: '$49.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/814380/header.jpg', descripcion: 'Acción desafiante con combates cuerpo a cuerpo y parry como mecánica central.', steamAppId: 814380 },
        { nombre: 'Devil May Cry 5', precio: '$39.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/601150/header.jpg', descripcion: 'Hack and slash estilizado con combos y personajes icónicos.', steamAppId: 601150 },
        { nombre: 'Nier: Automata', precio: '$39.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/524220/header.jpg', descripcion: 'Combina acción con narrativa filosófica y múltiples finales.', steamAppId: 524220 },
        { nombre: 'Gears 5', precio: '$39.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/1097840/header.jpg', descripcion: 'Shooter en tercera persona con fuerte enfoque en la campaña y multijugador.', steamAppId: 1097840 },
        { nombre: 'Max Payne 3', precio: '$9.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/204100/header.jpg', descripcion: 'Shooter con cámara lenta y narrativa noir.', steamAppId: 204100 },
        { nombre: 'Shadow of the Tomb Raider', precio: '$29.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/750920/header.jpg', descripcion: 'Acción-aventura con exploración, plataformas y combate.', steamAppId: 750920 },
        { nombre: 'Mad Max', precio: '$19.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/377200/header.jpg', descripcion: 'Acción post-apocalíptica con combate vehicular y a pie.', steamAppId: 377200 },
        { nombre: 'Just Cause 4', precio: '$19.99', imagen: 'https://cdn.cloudflare.steamstatic.com/steam/apps/594120/header.jpg', descripcion: 'Acción explosiva con físicas exageradas y mundo abierto para el caos.', steamAppId: 594120 }
    ];

    const grid = document.getElementById('grid');
    // header elements (shared behavior)
    const headerSearch = document.getElementById('headerSearch');
    const headerSearchForm = document.getElementById('headerSearchForm');
    const favCounter = document.getElementById('favCounter');
    const favCount = document.getElementById('favCount');
    const userBtn = document.getElementById('userBtn');
    let favorites = JSON.parse(localStorage.getItem('favorites')||'[]');

    function updateFavCounter(){ favCount.textContent = (favorites && favorites.length)? favorites.length : 0; const live = document.getElementById('favLive'); if(live) live.textContent = (favorites && favorites.length)? `Tienes ${favorites.length} favoritos` : 'No tienes favoritos'; }
    updateFavCounter();

    headerSearchForm.addEventListener('submit', (e)=>{ e.preventDefault(); const q = headerSearch.value.trim(); if(!q) return window.location.href='catalogo.html'; window.location.href = 'catalogo.html?search=' + encodeURIComponent(q); });
    headerSearch.addEventListener('keydown', (e)=>{ if(e.key === 'Enter'){ headerSearchForm.dispatchEvent(new Event('submit')); } });

    favCounter.addEventListener('click', ()=>{ if(!favorites || favorites.length===0){ alert('No tienes favoritos aún. Marca juegos con el botón ☆/★ para agregarlos.'); return; } const favItems = accionGames.filter(i=>favorites.includes(i.nombre)); grid.innerHTML=''; favItems.forEach(g=>{ const card = document.createElement('div'); card.className='card'; card.tabIndex=0; card.innerHTML = `<img src="${g.imagen}" alt="${g.nombre}"><h3 style="color:#00ffe7;margin:8px 0">${g.nombre}</h3><div class="precio">${g.precio}</div>`; card.addEventListener('click', ()=>openModal(g)); grid.appendChild(card); }); });
    favCounter.addEventListener('keydown', (e)=>{ if(e.key==='Enter' || e.key===' ' || e.key==='Spacebar'){ e.preventDefault(); favCounter.click(); } });
    favCounter.addEventListener('focus', ()=> favCounter.classList.add('focus-ring')); favCounter.addEventListener('blur', ()=> favCounter.classList.remove('focus-ring'));
    userBtn.addEventListener('focus', ()=> userBtn.classList.add('focus-ring')); userBtn.addEventListener('blur', ()=> userBtn.classList.remove('focus-ring'));
    function saveFavorites(){ localStorage.setItem('favorites', JSON.stringify(favorites)); updateFavCounter(); }

    function render(){
        grid.innerHTML = '';
        const juegos = [...accionGames].sort((a,b)=>a.nombre.localeCompare(b.nombre));
        juegos.forEach((g, idx)=>{
            const card = document.createElement('div');
            card.className = 'card';
            card.tabIndex = 0;
            const favActive = favorites.includes(g.nombre) ? '★' : '☆';
            const chips = g.plataforma ? (Array.isArray(g.plataforma) ? g.plataforma : []).map(p=>`<span class="chip">${p}</span>`).join(' ') : '';
            const rating = g.rating ? `<div style="margin-top:6px;color:#ccc;font-size:0.9em">Rating: ${g.rating}</div>` : '';
            card.innerHTML = `
                <img src="${g.imagen}" alt="${g.nombre}">
                <h3 style="color:#00ffe7;margin:8px 0">${g.nombre}</h3>
                <div class="precio">${g.precio}</div>
                <div style="margin-top:6px">${chips}</div>
                ${rating}
                <div style="display:flex;justify-content:space-between;align-items:center;margin-top:8px"><button class="fav-btn" data-name="${g.nombre}" style="background:transparent;border:none;color:#00ffe7;font-size:1.2em;cursor:pointer">${favActive}</button><button class="ver-btn" style="background:#00ffe7;color:#042;border:none;padding:6px 10px;border-radius:8px;cursor:pointer">Ver</button></div>
            `;
            card.querySelector('.ver-btn').addEventListener('click', ()=>openModal(g));
            card.querySelector('.fav-btn').addEventListener('click', (e)=>{ e.stopPropagation(); const name = g.nombre; const idx = favorites.indexOf(name); if(idx===-1){ favorites.push(name); e.target.textContent='★'; } else { favorites.splice(idx,1); e.target.textContent='☆'; } saveFavorites(); });
            grid.appendChild(card);
            // animate-in with small stagger
            requestAnimationFrame(()=>{ setTimeout(()=> card.classList.add('animate-in'), idx * 36); });
        });
            
    }
    function openModal(g){
        document.getElementById('m-img').src = g.imagen;
        document.getElementById('m-title').textContent = g.nombre;
        document.getElementById('m-price').textContent = g.precio;
        document.getElementById('m-desc').textContent = g.descripcion;
        // añadir botón Comprar en Steam
        let comprar = document.getElementById('m-comprar');
        if(!comprar){
            comprar = document.createElement('button');
            comprar.id = 'm-comprar';
            comprar.style.marginTop = '12px';
            comprar.style.background = '#00a2ff';
            comprar.style.color = '#fff';
            comprar.style.padding = '10px 14px';
            comprar.style.border = 'none';
            comprar.style.borderRadius = '8px';
            comprar.style.cursor = 'pointer';
            document.querySelector('.modal-content > div').appendChild(comprar);
        }
        comprar.textContent = 'Comprar en Steam';
        comprar.onclick = function(){
            if(g.steamAppId){
                const steamAppUrl = 'https://store.steampowered.com/app/' + g.steamAppId;
                window.open(steamAppUrl, '_blank');
            } else {
                const steamSearch = 'https://store.steampowered.com/search/?term=' + encodeURIComponent(g.nombre);
                window.open(steamSearch, '_blank');
            }
        };
        document.getElementById('modal').style.display = 'flex';
    }
    document.getElementById('close').addEventListener('click', ()=>{document.getElementById('modal').style.display='none'});
    document.getElementById('modal').addEventListener('click', (e)=>{ if(e.target===document.getElementById('modal')) document.getElementById('modal').style.display='none'; });
    render();
    </script>
    <script>
        // expose page globals for header.js
        window.catalog = accionGames; // header.js expects window.catalog
        window.favorites = favorites;
        window.renderCatalog = function(items){
            // render a simple grid for action page (reuse existing render())
            grid.innerHTML = '';
            items.forEach(g=>{
                const card = document.createElement('div'); card.className='card'; card.tabIndex=0;
                card.innerHTML = `<img src="${g.imagen}" alt="${g.nombre}"><h3 style="color:#00ffe7;margin:8px 0">${g.nombre}</h3><div class="precio">${g.precio}</div>`;
                card.addEventListener('click', ()=>openModal(g));
                grid.appendChild(card);
            });
        };
        if(typeof window.updateFavCounter !== 'function') window.updateFavCounter = function(){ const el=document.getElementById('favCount'); if(el) el.textContent = (favorites && favorites.length)? favorites.length : 0; };
    </script>
    <script src="header.js"></script>
        <footer style="max-width:1100px;margin:24px auto;color:#aaa;padding:18px;font-size:13px;text-align:center">
                        <div style="margin-bottom:8px">Enlaces rápidos: <a href="index.html" style="color:var(--accent)">Inicio</a> • <a href="catalogo.html" style="color:var(--accent)">Catálogo</a></div>
                        <div>Créditos: Demo educativo — imágenes públicas. Proyecto Abraham-13M.</div>
        </footer>
</body>
</html>